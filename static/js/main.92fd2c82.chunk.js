(this.webpackJsonpblog=this.webpackJsonpblog||[]).push([[0],{161:function(e,t,n){},162:function(e,t,n){},254:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(23),s=n.n(c),a=(n(161),n(29)),i=(n(162),n(141)),o=n(142),u=n(143),l=n.n(u).a.create({baseURL:"https://reqres.in/api",headers:{"Content-type":"application/json"}}),d=new(function(){function e(){Object(i.a)(this,e)}return Object(o.a)(e,[{key:"getAllUsers",value:function(){return l.get("/users")}},{key:"getById",value:function(e){return l.get("/users/".concat(e))}},{key:"createUser",value:function(e){return l.post("/users",e)}},{key:"updateById",value:function(e,t){return l.put("/users/".concat(e),t)}},{key:"deleteById",value:function(e){return l.delete("/users/".concat(e))}}]),e}()),j=n(264),b=n(59),O=n(267),f=n(257),h=n(266),m=n(34),x=n(6);var p=function(e){return Object(x.jsx)("div",{children:Object(x.jsxs)(j.a,{title:"Detalles del Usuario:",centered:!0,closable:!1,visible:e.visible,cancelButtonProps:{style:{display:"none"}},okText:"Cerrar",onOk:e.handleClose,children:[Object(x.jsxs)("p",{children:["Nombre: ",e.user.first_name]}),Object(x.jsxs)("p",{children:["Apellido: ",e.user.last_name," "]})," ",Object(x.jsxs)("p",{children:["Email: ",e.user.email," "]})," ",Object(x.jsxs)(O.b,{children:[Object(x.jsx)(m.b,{to:"/edit/"+e.user.id,children:Object(x.jsx)(b.a,{children:"Editar Usuario"})}),Object(x.jsx)(b.a,{danger:!0,onClick:function(){return e.handleDelete(e.user.id)},children:"Borrar Usuario"})]}),Object(x.jsx)(f.a,{}),e.success&&Object(x.jsx)(h.a,{message:"Usuario borrado con \xe9xito",type:"info"})]})})},g=n(258),y=n(259),v=n(261);var I=function(e){var t=Object(r.useState)([]),n=Object(a.a)(t,2),c=n[0],s=n[1],i=Object(r.useRef)(!0),o=Object(r.useRef)(!0);Object(r.useEffect)((function(){return d.getAllUsers().then((function(e){if(i.current){var t=localStorage.getItem("users");t?(t=Array.from(JSON.parse(t)),s(t)):t||(s(e.data.data.slice(0,5)),localStorage.setItem("users",JSON.stringify(e.data.data.slice(0,5))))}})).catch((function(e){return console.log(e)})),function(){i.current=!1,D(!1),clearTimeout(o.current)}}),[e]);var u=Object(r.useState)(!1),l=Object(a.a)(u,2),j=l[0],O=l[1],I=Object(r.useState)(!1),S=Object(a.a)(I,2),C=S[0],U=S[1],k=Object(r.useState)(),N=Object(a.a)(k,2),E=N[0],_=N[1],A=Object(r.useState)(!1),q=Object(a.a)(A,2),B=q[0],J=q[1],T=Object(r.useState)(!1),F=Object(a.a)(T,2),w=F[0],D=F[1],P=function(e){d.deleteById(e).then((function(t){console.log(t);var n=JSON.parse(localStorage.getItem("users")),r=n.findIndex((function(t){return+t.id===+e}));n.splice(r,1),localStorage.setItem("users",JSON.stringify(n)),i.current&&(D(!0),o.current=setTimeout((function(){return D(!1)}),3e3),window.location.reload())})).catch((function(e){return console.log(e)}))},R=c.slice(0,5).map((function(e){return Object(x.jsxs)("div",{className:"userContainer",children:[Object(x.jsxs)("h2",{children:["Nombre: ",e.first_name]}),Object(x.jsxs)(g.a,{justify:"space-around",children:[Object(x.jsx)(b.a,{type:"primary",onClick:function(){return function(e){U(!0),_(e),J(!0)}(e)},children:"Ver detalle de Usuario"})," ",Object(x.jsxs)(m.b,{to:"/edit/"+e.id,children:[Object(x.jsx)(b.a,{onClick:function(){return O(!0),void U(!1)},children:"Editar Usuario"})," "]}),Object(x.jsx)(b.a,{danger:!0,onClick:function(){return P(e.id)},children:"Borrar Usuario"})]})]},e.id+e.first_name)}));return Object(x.jsxs)("div",{children:[!j&&Object(x.jsxs)(y.a,{xs:{span:24},lg:{span:12,offset:6},children:[Object(x.jsx)("h1",{children:"Listado de Usuarios"}),R,w&&!C&&Object(x.jsx)(h.a,{message:"Usuario borrado con \xe9xito",type:"info"})]}),C&&Object(x.jsx)(p,{success:C&&w,user:E,visible:B,handleClose:function(){J(!1),U(!1)},handleDelete:P}),Object(x.jsx)(f.a,{dashed:!0}),Object(x.jsx)(y.a,{xs:{span:24},lg:{span:12,offset:6},children:Object(x.jsxs)(g.a,{justify:"space-around",children:[Object(x.jsx)(v.a,{type:"secondary",style:{textAlign:"justify"},children:"Desde el men\xfa y los botones se puede modificar los datos, que quedar\xe1n guardados en una copia local (la API no persiste las modificaciones). En caso de querer restaurarlos desde la API clickear el siguiente bot\xf3n."}),Object(x.jsx)(f.a,{dashed:!0}),Object(x.jsx)(b.a,{onClick:function(){localStorage.removeItem("users"),window.location.reload()},type:"secondary",children:"Restaurar datos desde la API"})]})})]})},S=function(){var e=Object(r.useRef)(!1);return Object(r.useEffect)((function(){return e.current=!0,function(){e.current=!1}}),[]),e},C=n(26),U=n(89),k=n(260),N=n(263),E=n(265);function _(e){var t=e.onFinish,n=e.editing,c=e.user_id,s=e.existingIDs,i=k.a.useForm(),o=Object(a.a)(i,1)[0],u=Object(r.useState)(0),l=Object(a.a)(u,2),d=l[0],j=l[1],O=Object(r.useState)(!0),f=Object(a.a)(O,2),h=f[0],m=f[1];c&&p(c);function p(e){console.log("edit",e);var t=JSON.parse(localStorage.getItem("users")),n=t.findIndex((function(t){return+t.id===+e})),r=t[n];new Promise((function(e,t){e(r)})).then((function(e){o.setFieldsValue(e),m(!1)}))}return Object(x.jsxs)(k.a,Object(U.a)(Object(U.a)({},{labelCol:{span:8},wrapperCol:{span:16}}),{},{form:o,name:"control-hooks",onFinish:function(e){return t(e,c||d)},children:[n&&Object(x.jsx)(k.a.Item,{label:"Id del usuario a editar",children:Object(x.jsx)(N.a,{type:"number",name:"Id",onChange:function(e){console.log(e),j((function(){return e})),p(e)},disabled:!h,children:s})}),Object(x.jsx)(k.a.Item,{label:"Nombre",name:"first_name",rules:[{required:!0,message:"Campo requerido"}],children:Object(x.jsx)(E.a,{type:"text"})}),Object(x.jsx)(k.a.Item,{label:"Apellido",name:"last_name",rules:[{required:!0,message:"Campo requerido"}],children:Object(x.jsx)(E.a,{type:"text"})}),Object(x.jsx)(k.a.Item,{label:"Email",name:"email",rules:[{required:!0,message:"Campo requerido"}],children:Object(x.jsx)(E.a,{type:"email"})}),Object(x.jsx)(b.a,{className:"rightAlignedButtons",type:"primary",htmlType:"submit",children:"Enviar"}),"  "]}))}var A=function(){var e=Object(C.f)(),t=Object(r.useState)(!1),n=Object(a.a)(t,2),c=n[0],s=n[1],i=Object(r.useRef)(!0);Object(r.useEffect)((function(){return function(){s(!1),clearTimeout(i.current)}}),[]);var o=S();return Object(x.jsx)("div",{children:Object(x.jsxs)(y.a,{span:12,offset:6,children:[Object(x.jsx)("h1",{children:"Agregar Usuario"}),Object(x.jsx)("p",{children:"Desde aqu\xed pod\xe9s agregar un nuevo usuario "}),Object(x.jsx)(_,{onFinish:function(t){var n={last_name:t.last_name,first_name:t.first_name,email:t.email};d.createUser(n).then((function(t){console.log(t);var n=t.data,r=JSON.parse(localStorage.getItem("users"));r.unshift(n),localStorage.setItem("users",JSON.stringify(r)),o.current&&(s(!0),i.current=setTimeout((function(){s(!1),e.push("/")}),3e3))})).catch((function(e){return console.log(e)}))}}),c&&Object(x.jsx)(h.a,{message:"Usuario creado con \xe9xito",type:"info"})]})})};var q=function(){var e=Object(C.f)(),t=Object(r.useState)(!1),n=Object(a.a)(t,2),c=n[0],s=n[1],i=S(),o=Object(r.useRef)(!0);Object(r.useEffect)((function(){return function(){i.current=!1,s(!1),clearTimeout(o.current)}}),[i]);var u,l=Object(C.h)().user_id;if(void 0===l){var j=localStorage.getItem("users");j?u=(j=Array.from(JSON.parse(j))).map((function(e){return Object(x.jsx)(N.a.Option,{children:e.id},e.id)})):j||console.log("error")}return Object(x.jsx)("main",{children:Object(x.jsxs)(y.a,{span:12,offset:6,children:[Object(x.jsx)("h1",{className:"centeredTitle",children:"Editar Usuario"}),Object(x.jsx)("p",{children:'En esta opci\xf3n pod\xe9s elegir el usuario a editar. Si en todo caso quer\xe9s editar directamente desde un usuario, hac\xe9 click sobre la opci\xf3n "editar" al pie del mismo.'}),Object(x.jsx)(_,{onFinish:function(t,n){d.updateById(n,t).then((function(r){console.log(r);var c=JSON.parse(localStorage.getItem("users")),a=c.findIndex((function(e){return+e.id===+n}));c[a]=Object(U.a)({id:+n},t),localStorage.setItem("users",JSON.stringify(c)),i.current&&(s(!0),o.current=setTimeout((function(){s(!1),e.push("/")}),3e3))})).catch((function(e){return console.log(e)}))},editing:!0,user_id:l,existingIDs:u}),Object(x.jsx)(m.b,{to:"/",children:Object(x.jsx)(b.a,{className:"rightAlignedButtons",danger:!0,children:"Cancelar Edicion"})}),c&&Object(x.jsx)(h.a,{message:"Usuario editado con \xe9xito",type:"info"})]})})},B=n(262),J=n(268),T=n(155),F=n(269);var w=function(){var e=Object(C.g)(),t=Object(r.useState)(e.pathname),n=Object(a.a)(t,2),c=n[0],s=n[1];return Object(x.jsxs)("div",{children:[Object(x.jsxs)(B.a,{onClick:function(e){s(e.key)},selectedKeys:c,mode:"horizontal",children:[Object(x.jsx)(B.a.Item,{icon:Object(x.jsx)(J.a,{}),children:Object(x.jsx)(m.b,{to:"/",children:"Principal"})},"/"),Object(x.jsx)(B.a.Item,{icon:Object(x.jsx)(T.a,{}),children:Object(x.jsx)(m.b,{to:"/edit",children:"Editar Usuario"})},"/edit"),Object(x.jsx)(B.a.Item,{icon:Object(x.jsx)(F.a,{}),children:Object(x.jsx)(m.b,{to:"/add",children:"Sumar Usuario"})},"/add")]}),Object(x.jsxs)(C.c,{children:[Object(x.jsx)(C.a,{exact:!0,path:"/edit/:user_id",component:q}),Object(x.jsx)(C.a,{exact:!0,path:"/edit",component:q}),Object(x.jsx)(C.a,{exact:!0,path:"/add",component:A}),Object(x.jsx)(C.a,{path:"/",render:function(){return Object(x.jsx)(I,{selection:c})}})]})]})},D=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,270)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,s=t.getLCP,a=t.getTTFB;n(e),r(e),c(e),s(e),a(e)}))};s.a.render(Object(x.jsx)(m.a,{children:Object(x.jsx)(w,{})}),document.getElementById("root")),D()}},[[254,1,2]]]);
//# sourceMappingURL=main.92fd2c82.chunk.js.map